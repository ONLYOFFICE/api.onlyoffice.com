# RenameFile

`POST /wopi/files/(file_id)`

重命名文件。

此操作的工作原理如下：

1. WOPI 主机检查文件当前是否被锁定。
2. 如果文件当前**被锁定**并且 **X-WOPI-Lock** 值与文件上当前的锁不匹配，则主机必须返回 **409 Conflict** (*"lock mismatch"*) 并包含 **X-WOPI-Lock** 响应标头，标头包含文件当前锁的值。
3. 如果文件**未被锁定**，主机应以 **200 OK** 响应并继续重命名。
4. 如果主机因为请求的名称无效或与现有文件冲突而无法重命名文件，主机应尝试根据请求的名称生成满足文件名要求的不同名称。
5. 如果主机不能生成不同的名称，它应该返回 **400 Bad Request**。响应必须包含描述文件名无效原因的 **X-WOPI-InvalidFileNameError** 标头。

## 参数

| 名称     | 类型   | 描述                                                                 |
| -------- | ------ | --------------------------------------------------------------------------- |
| file\_id | string | [file ID](../key-concepts.md#file-id) 必须是 URL 安全的文件 ID。 |

## 查询参数

| 名称          | 类型   | 描述                                                                                                                          |
| ------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| access\_token | string | [访问令牌](../key-concepts.md#access-token) 主机将用它确定请求是否被授权。 |


## 请求标头

| 名称                 | 类型   | 出现 | 描述                                                          |
| -------------------- | ------ | -------- | -------------------------------------------------------------------- |
| X-WOPI-Override      | string | 必需的 | 来自 WOPI 服务器的请求操作 (*RENAME_FILE*)。       |
| X-WOPI-Lock          | string | 可选的 | 锁ID主机必须用它来标识文件上的锁。 |
| X-WOPI-RequestedName | string | 可选的 | 文件名，不包括文件扩展名（UTF-7 格式）。 |

## Response headers

| 名称                        | 类型   | 出现 | 描述                                                                                                                                                                                                               |
| --------------------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| X-WOPI-InvalidFileNameError | string | 可选的 | 无法完成重命名操作的原因。仅当响应代码为 **400 Bad Request**时才应包含此标头。此值只能用于记录目的。                             |
| X-WOPI-Lock                 | string | 可选的 | 锁ID标识文件上的当前锁。当使用 **409 Conflict**响应请求时，必须始终包含此标头。用 **200 OK**响应请求时不应包含它。 |
| X-WOPI-LockFailureReason    | string | 可选的 | 锁定失败的原因。当使用 **409 Conflict** 响应请求时，可能会包含此标头。它只能用于记录目的。                                                               |

## Response body

| 名称 | 类型   | 出现 | 描述                                             |
| ---- | ------ | -------- | ------------------------------------------------------- |
| Name | string | 必需的 | 没有路径或文件扩展名的重命名文件名。 |
